<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>æ­·å²ç´€éŒ„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #f3f4f6; }
        .table-container { overflow-x: auto; }
        table { min-width: 100%; border-collapse: collapse; background: white; }
        th, td { border: 1px solid #e5e7eb; padding: 12px; text-align: left; white-space: nowrap; }
        th { background-color: #f9fafb; font-weight: bold; color: #374151; }
        tr:nth-child(even) { background-color: #f9fafb; }
    </style>
</head>
<body class="p-4 md:p-8">

<div class="max-w-7xl mx-auto">
    <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">å¥åº·è¿½è¹¤æ­·å²ç´€éŒ„</h1>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        
        <!-- å·¦æ¬„ï¼šæ‰€æœ‰å…¬é–‹ç´€éŒ„ -->
        <div>
            <h2 class="text-xl font-bold mb-4 text-blue-700 border-l-4 border-blue-700 pl-3">å¤§å®¶çš„ç´€éŒ„</h2>
            <div class="table-container bg-white rounded shadow">
                <table>
                    <thead>
                        <tr>
                            <th>æ™‚é–“</th>
                            <th>æš±ç¨±</th>
                            <th>BMI</th>
                            <th>TDEE</th>
                            <th>å¿ƒæƒ…</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for r in public_records[-10:]|reverse %}
                        <tr>
                            <td class="text-sm text-gray-500">{{ r.datetime[:16] }}</td>
                            <td>{{ r.display_name }}</td>
                            <td>{{ r.bmi }}</td>
                            <td class="text-blue-600 font-bold">{{ r.tdee }}</td>
                            <td>{{ r.mood }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å³æ¬„ï¼šå€‹äººç´€éŒ„ -->
        <div>
            <h2 class="text-xl font-bold mb-4 text-green-700 border-l-4 border-green-700 pl-3">
                æˆ‘çš„ç´€éŒ„ {% if my_nickname %}({{ my_nickname }}){% endif %}
            </h2>
            
            {% if my_records %}
            <div class="table-container bg-white rounded shadow">
                <table>
                    <thead>
                        <tr>
                            <th>æ™‚é–“</th>
                            <th>èº«é«˜/é«”é‡</th>
                            <th>BMI</th>
                            <th>TDEE</th>
                            <th>è¡€å£“</th>
                            <th>è¡€ç³–</th>
                            <th>è‚ŒåŠ›æŒ‡æ¨™</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for r in my_records|reverse %}
                        <tr>
                            <td class="text-sm text-gray-500">{{ r.datetime[:10] }}</td>
                            <td>{{ r.height }}/{{ r.weight }}</td>
                            <td>{{ r.bmi }}</td>
                            <td class="text-blue-600 font-bold">{{ r.tdee }}</td>
                            <td>
                                {% if r.bp_in and r.bp_out %}
                                    {{ r.bp_in|int }}/{{ r.bp_out|int }}
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                            <td>{{ r.blood_sugar }}</td>
                            <td>{{ r.strength }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <!-- é«”é‡è®ŠåŒ–æŠ˜ç·šåœ– -->
            <div class="bg-white mt-4 p-4 rounded shadow flex flex-col items-center">
                <h3 class="text-lg font-semibold mb-2 text-gray-800">æˆ‘çš„é«”é‡è®ŠåŒ–</h3>
                <img src="{{ url_for('weight_plot') }}" 
                     alt="é«”é‡è®ŠåŒ–æŠ˜ç·šåœ–"
                     class="max-w-full rounded shadow">
                <p class="text-xs text-gray-500 mt-2">
                    åœ–è¡¨ä¾ç…§ç´€éŒ„æ™‚é–“ç”±å·¦åˆ°å³æ’åˆ—ï¼Œå»ºè­°æŒçºŒç´€éŒ„é«”é‡ï¼Œè¿½è¹¤è‡ªå·±çš„è®ŠåŒ–ã€‚
                </p>
            </div>

            <!-- â­ å¢è‚Œæ¨¡å¼ï¼šè‚ŒåŠ›æå‡è¶¨å‹¢åœ– -->
            <div class="bg-white mt-4 p-4 rounded shadow flex flex-col items-center">
                <h3 class="text-lg font-semibold mb-2 text-gray-800">æˆ‘çš„è‚ŒåŠ›æå‡è¶¨å‹¢ï¼ˆå¢è‚Œ bulk æ¨¡å¼ï¼‰</h3>
                <img src="{{ url_for('strength_plot') }}" 
                     alt="è‚ŒåŠ›æå‡è¶¨å‹¢åœ–"
                     class="max-w-full rounded shadow">
                <p class="text-xs text-gray-500 mt-2">
                    åªæœ‰åœ¨é¦–é é¸æ“‡ã€Œå¢è‚Œ ğŸ’ªã€ä¸¦å¡«å¯«ã€Œä»Šæ—¥è‚ŒåŠ›æŒ‡æ¨™ã€çš„ç´€éŒ„ï¼Œæ‰æœƒå‡ºç¾åœ¨é€™å¼µåœ–ä¸­ã€‚
                </p>
            </div>

            {% else %}
                <div class="bg-white p-6 rounded shadow text-center text-gray-500">
                    <p>å°šæœªæœ‰æ‚¨çš„ç´€éŒ„ï¼Œè«‹å…ˆé€²è¡Œæª¢æ¸¬ä¸¦è¼¸å…¥ç›¸åŒçš„æš±ç¨±ã€‚</p>
                    <a href="/" class="inline-block mt-4 text-blue-600 underline">å»é¦–é æª¢æ¸¬</a>
                </div>
            {% endif %}
        </div>

    </div>

    <div class="text-center mt-8">
        <a href="/" class="bg-gray-600 text-white px-6 py-2 rounded-full hover:bg-gray-700 transition">è¿”å›é¦–é </a>
    </div>
</div>

</body>
</html>
